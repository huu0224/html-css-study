<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>FE Bio-Inspired Interaction</title>
    <style>
        body { margin: 0; background: #050505; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { display: block; filter: drop-shadow(0 0 10px #ff3e3e); }
        .ui { position: absolute; top: 30px; color: #ff3e3e; font-family: monospace; pointer-events: none; letter-spacing: 2px; }
    </style>
</head>
<body>

<div class="ui">INVERSE KINEMATICS ENGINE v1.0</div>
<canvas id="canvas"></canvas>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const mouse = { x: 0, y: 0 };
    let tentacles = [];

    window.addEventListener('mousemove', (e) => {
        mouse.x = e.clientX;
        mouse.y = e.clientY;
    });

    class Segment {
        constructor(x, y, len, angle) {
            this.a = { x, y }; // 시작점
            this.len = len;
            this.angle = angle;
            this.b = { x: 0, y: 0 }; // 끝점
            this.calculateB();
        }
        calculateB() {
            this.b.x = this.a.x + Math.cos(this.angle) * this.len;
            this.b.y = this.a.y + Math.sin(this.angle) * this.len;
        }
        follow(targetX, targetY) {
            const dirX = targetX - this.a.x;
            const dirY = targetY - this.a.y;
            this.angle = Math.atan2(dirY, dirX);
            this.a.x = targetX - Math.cos(this.angle) * this.len;
            this.a.y = targetY - Math.sin(this.angle) * this.len;
        }
    }

    class Tentacle {
        constructor(x, y, numSegments) {
            this.segments = [];
            this.segments[0] = new Segment(x, y, 15, 0);
            for (let i = 1; i < numSegments; i++) {
                this.segments[i] = new Segment(this.segments[i-1].b.x, this.segments[i-1].b.y, 15, 0);
            }
        }
        update() {
            const total = this.segments.length;
            this.segments[total - 1].follow(mouse.x, mouse.y);
            this.segments[total - 1].calculateB();

            for (let i = total - 2; i >= 0; i--) {
                this.segments[i].follow(this.segments[i + 1].a.x, this.segments[i + 1].a.y);
                this.segments[i].calculateB();
            }
        }
        draw() {
            ctx.beginPath();
            ctx.strokeStyle = '#ff3e3e';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.moveTo(this.segments[0].a.x, this.segments[0].a.y);
            for (let i = 0; i < this.segments.length; i++) {
                ctx.lineTo(this.segments[i].b.x, this.segments[i].b.y);
            }
            ctx.stroke();
        }
    }

    function init() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        tentacles = [new Tentacle(canvas.width/2, canvas.height/2, 30)];
    }

    function animate() {
        ctx.fillStyle = 'rgba(5, 5, 5, 0.2)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        tentacles.forEach(t => {
            t.update();
            t.draw();
        });
        requestAnimationFrame(animate);
    }

    window.addEventListener('resize', init);
    init();
    animate();
</script>
</body>
</html>